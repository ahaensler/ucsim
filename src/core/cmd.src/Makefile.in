#
# ucsim cmd.src/Makefile
#
# (c) Drotos Daniel, Talker Bt. 1997
#

PKG		= cmd

include ../../common.mk

srcdir          = @srcdir@
VPATH           = @srcdir@

top_builddir	= @top_builddir@
top_srcdir	= @top_srcdir@

include $(srcdir)/objs.mk


# Compiling entire program or any subproject
# ------------------------------------------
all: libs

libs: $(top_builddir)/lib$(PKG).a


# Compiling and installing everything
# -----------------------------------
installdirs:

install:

uninstall:


# Performing self-test
# --------------------
check:

test:

baseline:


# Creating dependencies
# ---------------------
dep: Makefile.dep

Makefile.dep: $(SOURCES) $(srcdir)/*.h #cmdpars.hh cmdpars.cc
	$(MAKEDEP) $(CPPFLAGS) $(filter %.cc,$^) >Makefile.dep

-include Makefile.dep
include $(srcdir)/clean.mk

cmdlex.cc: cmdlex.l cmdpars.hh

# My rules
# --------

$(top_builddir)/lib$(PKG).a: $(ALL_OBJECTS)
ifeq ($(SILENT),yes)
	@echo LIB $(TN)-$@
	@$(AR) -rc $@ $+
	@$(RANLIB) $@
else
	$(AR) -rc $@ $+
	$(RANLIB) $@
endif

#cmdpars.hh: cmdpars.cc

#cmdpars.cc: cmdpars.y
#	$(YACC) -d $<
#	mv y.tab.c $*.cc
#	mv y.tab.h $*.hh


# End of cmd.src/Makefile.in
