#
# S51 sim.src/Makefile
#
# (c) Drotos Daniel, Talker Bt. 1997,99
#

PKG		= sim

include ../../common.mk

srcdir          = @srcdir@
VPATH           = @srcdir@

top_builddir	= @top_builddir@
top_srcdir	= @top_srcdir@



# Compiling entire program or any subproject
# ------------------------------------------
all: libs

libs: $(top_builddir)/lib$(PKG).a


# Compiling and installing everything
# -----------------------------------
installdirs:

install:

uninstall:


# Performing self-test
# --------------------
check: test

.PHONY:	test baseline
test:
	@$(MAKE) --no-print-directory -C test

baseline:
	@$(MAKE) --no-print-directory -C test baseline


# Creating dependencies
# ---------------------
dep: main.dep

Makefile.dep: $(srcdir)/*.cc $(srcdir)/*.h $(srcdir)/objs.mk
	$(MAKEDEP) $(CPPFLAGS) $(filter %.cc,$^) >Makefile.dep

-include Makefile.dep
include $(srcdir)/clean.mk


# My rules
# --------

$(top_builddir)/libsim.a: $(ALL_OBJECTS) $(srcdir)/objs.mk
ifeq ($(SILENT),yes)
	@echo LIB $(TN)-$@
	@$(AR) -rc $@ $+
	@$(RANLIB) $@
else
	$(AR) -rc $@ $+
	$(RANLIB) $@
endif


# End of sim.src/Makefile
